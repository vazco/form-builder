"use strict";(self.webpackChunkforminer=self.webpackChunkforminer||[]).push([[542],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>c});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),d=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=d(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=d(t),c=i,f=u["".concat(s,".").concat(c)]||u[c]||p[c]||r;return t?a.createElement(f,o(o({ref:n},m),{},{components:t})):a.createElement(f,o({ref:n},m))}));function c(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var d=2;d<r;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},9728:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>m});var a=t(7462),i=(t(7294),t(3905)),r=t(8786);const o={description:"Learn how Forminer's schema work"},l="Form Definition",s={unversionedId:"form-definition",id:"form-definition",title:"Form Definition",description:"Learn how Forminer's schema work",source:"@site/docs/form-definition.mdx",sourceDirName:".",slug:"/form-definition",permalink:"/docs/form-definition",draft:!1,tags:[],version:"current",frontMatter:{description:"Learn how Forminer's schema work"},sidebar:"docs",previous:{title:"Installation",permalink:"/docs/installation"},next:{title:"Display If",permalink:"/docs/display-if"}},d={},m=[{value:"Example form definition",id:"example-form-definition",level:2},{value:"Advanced usage",id:"advanced-usage",level:2}],p={toc:m};function u(e){let{components:n,...o}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,o,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"form-definition"},"Form Definition"),(0,i.kt)("p",null,"As you may have noticed, the Forminer form definition consists of three parts: ",(0,i.kt)("strong",{parentName:"p"},"layouts"),", ",(0,i.kt)("strong",{parentName:"p"},"schema"),", and ",(0,i.kt)("strong",{parentName:"p"},"views"),". On the contrary, a uniforms schema is only a single object, called ",(0,i.kt)("strong",{parentName:"p"},"bridge"),". It may be surprising because Forminer is based on uniforms. Let's look into them one by one:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Schema.")," This part contains the data definition, which is a list of fields. Each field has a name, data type, default value, error messages, and validation rules (e.g., minimum string length, numeric range). It's a custom format, heavily inspired by the JSON Schema."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"To make it understandable for uniforms, it's being transformed into one, actually. Additionally, it's possible to subset it, creating a JSON Schema of a single page. Of course, all of this logic is aware of a Forminer-only feature: conditional rendering."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Views.")," This part defines the way a field is displayed. Most importantly, it defines which of the registered uniforms-compatible components will be used. Besides that, there are also field properties, like the label or placeholder. Lastly, there's the conditional rendering rule (if any).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Layouts.")," This part is a list of form pages. Every page has a name and one ",(0,i.kt)("em",{parentName:"p"},"layout item"),". A layout item is one of the following:")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"A field"),", rendering a given view, as defined in ",(0,i.kt)("strong",{parentName:"p"},"views"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"A widget"),", rendering a read-only component, e.g., some text or an image.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"A container"),", rendering some wrapper (carousel, list, table, etc.) and its inner layout item(s). That's the power of Forminer \u2013 you can freely nest containers without extra logic. However, it makes the form definition recursive, making it not necessarily easy to store in a non-recursive fashion. We got you covered \u2013 there's a pair of helper functions that (de)linearize the form definition into a non-recursive structure."))),(0,i.kt)("h2",{id:"example-form-definition"},"Example form definition"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "schema": [\n    // Every field has an unique `fieldId` provided by the Forminer.\n    { "fieldId": "1", "name": "name", "type": "string", "required": true },\n    { "fieldId": "2", "name": "variantA", "type": "number", "required": true },\n    { "fieldId": "3", "name": "variantB", "type": "number", "required": true }\n  ],\n  "views": [\n    // Every view has an unique `viewId` provided by the Forminer.\n    {\n      "component": "TextField",\n      "fieldId": "1",\n      "label": "Name",\n      "viewId": "1"\n    },\n    {\n      "component": "AutoField",\n      "fieldId": "2",\n      "label": "Variant A",\n      "viewId": "2"\n    },\n    {\n      "component": "NumField",\n      "fieldId": "3",\n      "label": "Variant B",\n      "viewId": "3"\n    }\n  ],\n  "layouts": [\n    {\n      "name": "Page 1",\n      // A page is by default rendered using a vertical list.\n      "layout": {\n        "kind": "Container",\n        "type": "List",\n        "config": { "variant": "vertical" },\n        // Every layout node has an unique `layoutId` provided by the Forminer.\n        "layoutId": "1",\n        "children": [\n          { "kind": "Field", "viewId": "1", "layoutId": "2" },\n          {\n            "kind": "Widget",\n            "type": "Image",\n            "config": {\n              "imageUrl": "https://picsum.photos/500",\n              "alt": "Random image",\n              "width": 250,\n              "height": 250\n            },\n            "layoutId": "3"\n          },\n          {\n            "kind": "Container",\n            "config": { "variant": "horizontal" },\n            "type": "List",\n            "layoutId": "4",\n            "children": [\n              { "kind": "Field", "viewId": "2", "layoutId": "5" },\n              { "kind": "Field", "viewId": "3", "layoutId": "6" }\n            ]\n          }\n        ]\n      }\n    }\n  ]\n}\n')),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A form rendered using the above form definition",src:t(5889).Z,width:"520",height:"464"})),(0,i.kt)("h2",{id:"advanced-usage"},"Advanced usage"),(0,i.kt)("p",null,"Now, there's a twist! The Forminer UI allows you to build any form you'd like, but the form definition allows you to do two more things:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Every field can have multiple views.")," The field's value is shared between the views, but you can use different components for each of them. A good example is an address input and a map \u2013 instead of building it within one component, you could have two independent ones.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Every view can be used multiple times in the layouts.")," Similarly, you can render the same view multiple times. A good example is to give the user an option to review the values before sending them by displaying the same view the second time on the last page."))),(0,i.kt)("p",null,"Neither of these features is available in the UI, but you can leverage them while manipulating the form definition programmatically. It can be used to automatically enrich the forms that the users built."),(0,i.kt)("p",null,"Here's an example schema leveraging these two features:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "views": [\n    // Note that these two views have the same `fieldId`.\n    {\n      "component": "AutoField",\n      "fieldId": "1",\n      "label": "First name (a)",\n      "viewId": "1"\n    },\n    {\n      "component": "AutoField",\n      "fieldId": "1",\n      "label": "First name (b)",\n      "viewId": "2"\n    },\n    {\n      "component": "AutoField",\n      "fieldId": "2",\n      "label": "Last name",\n      "viewId": "3"\n    }\n  ],\n  "layouts": [\n    {\n      "name": "Page 1",\n      "layout": {\n        "kind": "Container",\n        "type": "List",\n        "config": { "variant": "vertical" },\n        "layoutId": "1",\n        "children": [\n          { "kind": "Field", "viewId": "1", "layoutId": "2" },\n          { "kind": "Field", "viewId": "2", "layoutId": "3" },\n          // Note that these two layout nodes have the same `viewId`.\n          { "kind": "Field", "viewId": "3", "layoutId": "4" },\n          { "kind": "Field", "viewId": "3", "layoutId": "5" }\n        ]\n      }\n    }\n  ],\n  "schema": [\n    { "fieldId": "1", "name": "firstName", "type": "string" },\n    { "fieldId": "2", "name": "lastName", "type": "string" }\n  ]\n}\n')),(0,i.kt)("div",{className:"row"},(0,i.kt)("div",{className:"col col--8"},(0,i.kt)("p",null,"On the right, you can see the form rendered using the above schema."),(0,i.kt)("p",null,"As you can see, the layout node that refer to the same view (bottom two) are rendered identically and their values\nare synced."),(0,i.kt)("p",null,"The top two values have different views a(and different labels in this example), but as they refer to the same\nfield, their value is also synced.")),(0,i.kt)("div",{className:"col col--4"},(0,i.kt)("video",{controls:!0},(0,i.kt)("source",{src:r.Z})))))}u.isMDXComponent=!0},8786:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/medias/13139977-3d13d9373c2c6b3a569b2f70b44831e1.mov"},5889:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/13598723-dc82ce2cf686553584a341bd0209a0bf.webp"}}]);